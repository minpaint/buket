# –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å Product
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `categories` (ManyToManyField) –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –ø–æ–ª–µ `category` (ForeignKey) –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –°–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `0011_product_categories_alter_product_category`

### 2. –°–æ–∑–¥–∞–Ω–∞ –∏–µ—Ä–∞—Ä—Ö–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
–í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞: `python manage.py create_categories`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ **54 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**
- ‚úÖ –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (13):
  - –°–≤–∞–¥–µ–±–Ω–∞—è —Ñ–ª–æ—Ä–∏—Å—Ç–∏–∫–∞ (4 –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
  - –ë—É–∫–µ—Ç—ã –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ (9 –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π)
  - –ë—É–∫–µ—Ç—ã –∏–∑ —Ä–æ–∑
  - –ë—É–∫–µ—Ç—ã –ø–æ —Ü–≤–µ—Ç–∞–º (21 –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è)
  - –¶–≤–µ—Ç–æ—á–Ω—ã–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ (4 –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
  - –¶–≤–µ—Ç—ã –≤ –∫–æ—Ä–æ–±–∫–∞—Ö
  - –°–µ—Ä–¥—Ü–µ –∏–∑ —Ä–æ–∑ –∏ –¥—Ä—É–≥–∏—Ö —Ü–≤–µ—Ç–æ–≤
  - –ë—É–∫–µ—Ç—ã –¥–ª—è –º—É–∂—á–∏–Ω
  - –ë—É–∫–µ—Ç—ã —Å —Ñ—Ä—É–∫—Ç–∞–º–∏
  - –ö–æ—Ä–∑–∏–Ω—ã —Å —Ü–≤–µ—Ç–∞–º–∏ (3 –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
  - –ó–∏–º–Ω–∏–µ –±—É–∫–µ—Ç—ã
  - –ì–æ—Ä—à–µ—á–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è
  - –ë—É–∫–µ—Ç –∏–∑ —Å—É—Ö–æ—Ü–≤–µ—Ç–æ–≤

### 3. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Ç–æ–≤–∞—Ä—ã
–í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞: `python manage.py migrate_old_data --products-only`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ **168 —Ç–æ–≤–∞—Ä–æ–≤** –∏–∑ —Å—Ç–∞—Ä–æ–π –±–∞–∑—ã VirtueMart
- ‚úÖ –¢–æ–≤–∞—Ä—ã —Å–≤—è–∑–∞–Ω—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —á–µ—Ä–µ–∑ many-to-many
- ‚úÖ –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∞—Ä—Ç–∏–∫—É–ª—ã, –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏—è

### 4. –°–æ–∑–¥–∞–Ω—ã –∑–∞–ø–∏—Å–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ **366 –∑–∞–ø–∏—Å–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (sort_order)
- ‚úÖ –ü—É—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ VirtueMart

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å

### 1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–í–∞–∂–Ω–æ!** –ó–∞–ø–∏—Å–∏ –≤ –ë–î —Å–æ–∑–¥–∞–Ω—ã, –Ω–æ —Å–∞–º–∏ —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é.

**–û—Ç–∫—É–¥–∞:** `<—Å—Ç–∞—Ä—ã–π_—Å–∞–π—Ç>/images/product/data/*.jpg`

**–ö—É–¥–∞:** `G:\–ú–æ–π –¥–∏—Å–∫\buket\backend\media\products\`

**–ö–∞–∫:**

#### PowerShell —Å–∫—Ä–∏–ø—Ç:
```powershell
$sourceDir = "–ø—É—Ç—å\–∫\—Å—Ç–∞—Ä–æ–º—É\—Å–∞–π—Ç—É\images\product\data"
$targetDir = "G:\–ú–æ–π –¥–∏—Å–∫\buket\backend\media\products"

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
New-Item -ItemType Directory -Force -Path $targetDir

# –ö–æ–ø–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
Get-ChildItem -Path $sourceDir -Filter *.* | Where-Object {
    $_.Extension -match '\.(jpg|jpeg|png|gif)$'
} | ForEach-Object {
    Copy-Item $_.FullName -Destination $targetDir
    Write-Host "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: $($_.Name)"
}
```

#### –ò–ª–∏ —á–µ—Ä–µ–∑ Python:
```python
import os
import shutil
from pathlib import Path

source_dir = Path("–ø—É—Ç—å/–∫/—Å—Ç–∞—Ä–æ–º—É/—Å–∞–π—Ç—É/images/product/data")
target_dir = Path("G:/–ú–æ–π –¥–∏—Å–∫/buket/backend/media/products")

target_dir.mkdir(parents=True, exist_ok=True)

for img in source_dir.glob("*.*"):
    if img.suffix.lower() in ['.jpg', '.jpeg', '.png', '.gif']:
        shutil.copy2(img, target_dir / img.name)
        print(f"–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {img.name}")
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤

–¢–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ 0. –ù—É–∂–Ω–æ:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Ç–∞–±–ª–∏—Ü–∞ —Å —Ü–µ–Ω–∞–º–∏ –≤ SQL –¥–∞–º–ø–µ
2. –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Django Admin

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–æ–≤–∞—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
```bash
python manage.py shell
```

```python
from shop.models import Category, Product

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
for cat in Category.objects.all()[:10]:
    count = cat.products.count()
    print(f"{cat.name}: {count} —Ç–æ–≤–∞—Ä–æ–≤")

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–≤–∞—Ä—ã –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
no_cat = Product.objects.filter(categories__isnull=True)
print(f"\n–¢–æ–≤–∞—Ä–æ–≤ –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: {no_cat.count()}")
```

## üìä –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
–ö–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –ë–î: 54
  - –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö: 13
  - –î–æ—á–µ—Ä–Ω–∏—Ö: 41

–¢–æ–≤–∞—Ä–æ–≤ –≤ –ë–î: 168
  - –° –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π: ~168
  - –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏: ~168

–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ë–î: 366
  - –ó–∞–ø–∏—Å–µ–π –≤ –ë–î: 366
  - –§–∞–π–ª–æ–≤ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: 0 (–Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å)
```

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
cd "G:\–ú–æ–π –¥–∏—Å–∫\buket\backend"
python manage.py shell
```

```python
from shop.models import Category, Product, ProductImage

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
print(f"Categories: {Category.objects.count()}")
print(f"Products: {Product.objects.count()}")
print(f"Images: {ProductImage.objects.count()}")

# –ü—Ä–∏–º–µ—Ä —Ç–æ–≤–∞—Ä–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
p = Product.objects.first()
print(f"\n{p.title}")
cats = p.categories.all()
print(f"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ ({cats.count()}): {[c.name for c in cats]}")
```

### –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
```bash
python manage.py create_categories --clear
```

### –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```python
from shop.models import Product, Category, ProductImage

# –û—Å—Ç–æ—Ä–æ–∂–Ω–æ! –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
ProductImage.objects.all().delete()
Product.objects.all().delete()
Category.objects.all().delete()
```

### –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
```bash
# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
python manage.py create_categories

# –¢–æ–≤–∞—Ä—ã
python manage.py migrate_old_data --products-only

# –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
python manage.py migrate_old_data --images-only
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î - **–≤—ã–ø–æ–ª–Ω–µ–Ω–æ**
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π - **–≤—ã–ø–æ–ª–Ω–µ–Ω–æ**
3. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ - **–≤—ã–ø–æ–ª–Ω–µ–Ω–æ**
4. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - **–≤—ã–ø–æ–ª–Ω–µ–Ω–æ**
5. ‚¨ú –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - **—Ç—Ä–µ–±—É–µ—Ç—Å—è**
6. ‚¨ú –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Django Admin
7. ‚¨ú –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤
8. ‚¨ú –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞
9. ‚¨ú –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

## üìù –ó–∞–º–µ—Ç–∫–∏

- –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –≤ Windows –∫–æ–Ω—Å–æ–ª–∏ (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –∫—Ä–∞–∫–æ–∑—è–±—Ä—ã) - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –¢–æ–≤–∞—Ä—ã –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –£ –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –µ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è (`category`) –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ (`categories`)
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ `sort_order`
