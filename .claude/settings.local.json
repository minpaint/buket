{
  "permissions": {
    "allow": [
      "Bash(dir:*)",
      "Bash(pip install:*)",
      "Bash(npm install:*)",
      "Bash(python manage.py migrate:*)",
      "Bash(python manage.py runserver:*)",
      "Bash(npm run dev:*)",
      "Bash(node --version:*)",
      "Bash(npm:*)",
      "Bash(npx next dev --turbopack)",
      "Bash(tasklist:*)",
      "Bash(\"C:\\\\Users\\\\miag\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python313\\\\python.exe\" -m pip install -r backend/requirements.txt)",
      "Bash(grep:*)",
      "Bash(python manage.py shell:*)",
      "Bash(python3:*)",
      "Bash(\"G:/Мой диск/buket/old/extract_products.py\":*)",
      "Bash(python:*)",
      "Bash(sqlite3:*)",
      "Bash(\"G:/Мой диск/buket/parse_sql.py\":*)",
      "Bash(powershell -Command:*)",
      "Bash(/tmp/extract_vm.py:*)",
      "Bash(/tmp/extract_vm2.py:*)",
      "Bash(/tmp/extract_names.py:*)",
      "Bash(/tmp/extract_combined.py:*)",
      "Bash(/tmp/debug_names.py:*)",
      "Bash(/tmp/extract_final.py:*)",
      "Bash(curl:*)",
      "Bash(netstat:*)",
      "Bash(del:*)",
      "Bash(ls \"G:\\\\Мой диск\\\\buket\\\\backend\\\\media\\\\products\"\" | head -20 2>&1 && echo \"---\" && ls \"G:Мой дискbuketbackendmediaproducts\"\")",
      "Bash(cmd /c \"dir /b \"\"G:\\\\Мой диск\\\\buket\\\\backend\\\\media\\\\products\"\" | find /c /v \"\"\"\"\")",
      "Bash(cmd /c \"dir /b \"\"G:\\\\Мой диск\\\\buket\\\\backend\\\\media\\\\products\"\" | head\")",
      "Bash(cmd /c \"dir \"\"G:\\\\Мой диск\\\\buket\\\\backend\\\\media\\\\products\"\" /b 2>&1 | more +1\")",
      "Bash(cmd /c \"dir /b \"\"G:\\\\Мой диск\\\\buket\\\\backend\\\\media\\\\products\"\"\")",
      "Bash(xargs:*)",
      "Bash(find \"G:\\\\Мой диск\\\\buket\\\\old\\\\public_html\\\\images\\\\product\\\\data\" -maxdepth 1 -type d ! -name data -exec bash -c 'dir=$1; cnt=$\\(find \"\"$dir\"\" -type f 2>/dev/null | wc -l\\); if [ \"\"$cnt\"\" -gt 0 ]; then echo \"\"$\\(basename \"\"$dir\"\"\\): $cnt\"\"; fi' _ {} ;)",
      "Bash(find:*)",
      "Bash(findstr:*)",
      "Bash(Get-ChildItem -Path \"G:\\\\Мой диск\\\\buket\\\\backend\" -Recurse -Filter \"urls.py\")",
      "Bash(Select-Object FullName)",
      "Bash(pkill:*)",
      "Bash(ls:*)",
      "Bash(where:*)",
      "Bash(\"C:\\\\Users\\\\Alexander\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python313\\\\python.exe\" -c:*)",
      "Bash(\"C:\\\\Users\\\\Alexander\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python313\\\\python.exe\" -c \"\nimport openpyxl\nwb = openpyxl.load_workbook\\(''bukety_tablica.xlsx''\\)\nws = wb.active\n# Check encoding by printing raw bytes\nrow2 = list\\(ws.iter_rows\\(min_row=2, max_row=2, values_only=True\\)\\)[0]\nfor v in row2:\n    if isinstance\\(v, str\\):\n        print\\(repr\\(v\\)\\)\n    else:\n        print\\(v\\)\n\")",
      "Bash(Remove-Item -Force \"G:\\\\Мой диск\\\\buket\\\\backend\\\\shop\\\\__pycache__\\\\views*.pyc\" -ErrorAction SilentlyContinue)",
      "Bash(echo:*)",
      "Bash(pip show:*)",
      "Bash(\"G:\\\\Мой диск\\\\buket\\\\backend\\\\tmp_check_slugify.py\" << 'EOF'\ntry:\n    from slugify import slugify\n    print\\('python-slugify ok:', slugify\\('hello world'\\)\\)\nexcept Exception as e:\n    print\\('python-slugify FAILED:', e\\)\n\ntry:\n    import pytils\n    print\\('pytils ok'\\)\nexcept Exception as e:\n    print\\('pytils FAILED:', e\\)\nEOF)",
      "Bash(\"G:\\\\Мой диск\\\\buket\\\\backend\\\\tmp_sql_search.py\" << 'EOF'\nimport re\n\nprint\\(\"=== Searching for CREATE TABLE jshopping_products ===\"\\)\nwith open\\(r'G:/Мой диск/buket/old/buketby_nov.sql', encoding='utf-8', errors='replace'\\) as f:\n    content = f.read\\(\\)\n\nm = re.search\\(r'CREATE TABLE.*?jshopping_products.*?\\\\\\(.*?\\\\\\);', content, re.DOTALL | re.IGNORECASE\\)\nif m:\n    print\\(m.group\\(0\\)[:3000]\\)\nelse:\n    print\\('not found'\\)\n\nprint\\(\"\\\\n=== Searching for alias in first 500 lines ===\"\\)\nwith open\\(r'G:/Мой диск/buket/old/buketby_nov.sql', encoding='utf-8', errors='replace'\\) as f:\n    for i, line in enumerate\\(f\\):\n        if 'alias' in line.lower\\(\\) and i < 500:\n            print\\(i, line.rstrip\\(\\)\\)\nEOF)",
      "Bash(\"G:\\\\Мой диск\\\\buket\\\\backend\\\\tmp_sql_search2.py\" << 'EOF'\nimport re\n\nprint\\(\"=== All CREATE TABLE names containing 'jshopping' ===\"\\)\nwith open\\(r'G:/Мой диск/buket/old/buketby_nov.sql', encoding='utf-8', errors='replace'\\) as f:\n    content = f.read\\(\\)\n\ntables = re.findall\\(r'CREATE TABLE `\\([^`]*jshopping[^`]*\\)`', content, re.IGNORECASE\\)\nprint\\(\"JShopping tables found:\", tables\\)\n\nprint\\(\"\\\\n=== Exact CREATE TABLE for jshopping_products ===\"\\)\n# More targeted: find the specific table\nm = re.search\\(r'\\(CREATE TABLE `[^`]*jshopping_products`[^;]+;\\)', content, re.DOTALL | re.IGNORECASE\\)\nif m:\n    print\\(m.group\\(0\\)[:5000]\\)\nelse:\n    print\\('jshopping_products table not found, trying product variants...'\\)\n    # try any product table\n    for table in tables:\n        if 'product' in table.lower\\(\\):\n            print\\(f\"  Found product-related table: {table}\"\\)\n            m2 = re.search\\(r'\\(CREATE TABLE `' + re.escape\\(table\\) + r'`[^;]+;\\)', content, re.DOTALL\\)\n            if m2:\n                print\\(m2.group\\(0\\)[:4000]\\)\n\nprint\\(\"\\\\n=== Search for 'alias' or 'slug' or 'seo' in jshopping table definitions ===\"\\)\nfor table in tables:\n    pattern = r'CREATE TABLE `' + re.escape\\(table\\) + r'`[^;]+;'\n    m = re.search\\(pattern, content, re.DOTALL\\)\n    if m:\n        tbl = m.group\\(0\\)\n        if any\\(kw in tbl.lower\\(\\) for kw in ['alias', 'slug', 'seo']\\):\n            print\\(f\"\\\\nTable: {table}\"\\)\n            print\\(tbl[:3000]\\)\n\nEOF)",
      "Bash(\"G:\\\\Мой диск\\\\buket\\\\backend\\\\tmp_sql_aliases.py\" << 'EOF'\nimport re\n\nprint\\(\"=== Sample alias values from wzx3q_jshopping_products ===\"\\)\nwith open\\(r'G:/Мой диск/buket/old/buketby_nov.sql', encoding='utf-8', errors='replace'\\) as f:\n    content = f.read\\(\\)\n\n# Find INSERT INTO for jshopping_products\ninsert_m = re.search\\(\n    r\"INSERT INTO `wzx3q_jshopping_products`.*?VALUES\\\\s*\\(.*?\\)\\(?:;\\\\s*--|;\\\\s*$|\\\\Z\\)\",\n    content, re.DOTALL\n\\)\nif insert_m:\n    raw = insert_m.group\\(0\\)\n    print\\(\"Found INSERT block, length:\", len\\(raw\\)\\)\n\n    # Find column names\n    col_m = re.search\\(r'INSERT INTO `wzx3q_jshopping_products` \\\\\\(\\([^\\)]+\\)\\\\\\)', raw\\)\n    if col_m:\n        cols_raw = col_m.group\\(1\\)\n        cols = [c.strip\\(\\).strip\\('`'\\) for c in cols_raw.split\\(','\\)]\n        print\\(\"Columns:\", cols\\)\n        print\\(\\)\n\n        # Get alias column indices\n        alias_indices = [\\(i, c\\) for i, c in enumerate\\(cols\\) if 'alias' in c.lower\\(\\)]\n        name_indices  = [\\(i, c\\) for i, c in enumerate\\(cols\\) if c.startswith\\('name_'\\)]\n        print\\(\"Alias columns:\", alias_indices\\)\n        print\\(\"Name columns:\",  name_indices\\)\n        print\\(\\)\n\n        # Extract first few VALUE rows\n        rows_raw = re.findall\\(r'\\\\\\(\\([^\\(\\)]{10,}\\)\\\\\\)', raw\\)\n        print\\(f\"Found {len\\(rows_raw\\)} rows. Showing first 5:\"\\)\n        for row in rows_raw[:5]:\n            # naive split \\(ok for inspection\\)\n            vals = re.split\\(r\",\\(?=\\(?:[^']*'[^']*'\\)*[^']*$\\)\", row\\)\n            for i, name in name_indices:\n                if i < len\\(vals\\):\n                    print\\(f\"  {name}: {vals[i].strip\\(\\)}\"\\)\n            for i, name in alias_indices:\n                if i < len\\(vals\\):\n                    print\\(f\"  {name}: {vals[i].strip\\(\\)}\"\\)\n            print\\(\\)\n    else:\n        print\\(\"Could not parse column names from INSERT\"\\)\n        print\\(raw[:500]\\)\nelse:\n    print\\(\"No INSERT INTO wzx3q_jshopping_products found\"\\)\nEOF)",
      "Bash(\"G:\\\\Мой диск\\\\buket\\\\backend\\\\tmp_sql_aliases2.py\" << 'EOF'\nimport re\n\nprint\\(\"=== All alias_ru-RU values from wzx3q_jshopping_products ===\"\\)\nwith open\\(r'G:/Мой диск/buket/old/buketby_nov.sql', encoding='utf-8', errors='replace'\\) as f:\n    content = f.read\\(\\)\n\ninsert_m = re.search\\(\n    r\"INSERT INTO `wzx3q_jshopping_products`.*?VALUES\\\\s*\\(.*?\\)\\(?:;\\\\s*--|;\\\\s*$|\\\\Z\\)\",\n    content, re.DOTALL\n\\)\nif insert_m:\n    raw = insert_m.group\\(0\\)\n    col_m = re.search\\(r'INSERT INTO `wzx3q_jshopping_products` \\\\\\(\\([^\\)]+\\)\\\\\\)', raw\\)\n    if col_m:\n        cols = [c.strip\\(\\).strip\\('`'\\) for c in col_m.group\\(1\\).split\\(','\\)]\n        alias_ru_idx = cols.index\\('alias_ru-RU'\\)\n        alias_en_idx = cols.index\\('alias_en-GB'\\)\n        name_ru_idx  = cols.index\\('name_ru-RU'\\)\n\n        rows_raw = re.findall\\(r'\\\\\\(\\([^\\(\\)]{10,}\\)\\\\\\)', raw\\)\n        print\\(f\"Total rows: {len\\(rows_raw\\) - 1}  \\(skipping header row\\)\"\\)\n        print\\(f\"Column indices: alias_ru={alias_ru_idx}, alias_en={alias_en_idx}, name_ru={name_ru_idx}\"\\)\n        print\\(\\)\n\n        empty_alias = 0\n        non_empty   = 0\n        for row in rows_raw[1:]:  # skip header\n            vals = re.split\\(r\",\\(?=\\(?:[^']*'[^']*'\\)*[^']*$\\)\", row\\)\n            if alias_ru_idx < len\\(vals\\):\n                v = vals[alias_ru_idx].strip\\(\\).strip\\(\"'\"\\)\n                if v:\n                    non_empty += 1\n                else:\n                    empty_alias += 1\n\n        print\\(f\"alias_ru-RU: {non_empty} filled, {empty_alias} empty\"\\)\n        print\\(\\)\n        print\\(\"Sample alias_ru-RU values \\(first 20 non-empty\\):\"\\)\n        count = 0\n        for row in rows_raw[1:]:\n            vals = re.split\\(r\",\\(?=\\(?:[^']*'[^']*'\\)*[^']*$\\)\", row\\)\n            if alias_ru_idx < len\\(vals\\):\n                v = vals[alias_ru_idx].strip\\(\\).strip\\(\"'\"\\)\n                if v and count < 20:\n                    print\\(f\"  [{count+1}] {v}\"\\)\n                    count += 1\nEOF)",
      "Bash(git show:*)",
      "Bash(git checkout:*)",
      "WebFetch(domain:buket.by)",
      "Bash(\"G:\\\\Мой диск\\\\buket\\\\backend\\\\shop\\\\models.py\" << 'EOF'\n\n\nclass SitePage\\(models.Model\\):\n    slug = models.SlugField\\(max_length=60, unique=True, verbose_name='URL \\(slug\\)'\\)\n    title = models.CharField\\(max_length=200, verbose_name='Заголовок'\\)\n    content = models.TextField\\(verbose_name='Содержимое \\(HTML\\)'\\)\n    is_active = models.BooleanField\\(default=True, verbose_name='Активна'\\)\n    sort_order = models.PositiveSmallIntegerField\\(default=0, verbose_name='Порядок в меню'\\)\n\n    class Meta:\n        ordering = \\('sort_order', 'title'\\)\n        verbose_name = 'Страница сайта'\n        verbose_name_plural = 'Страницы сайта'\n\n    def __str__\\(self\\):\n        return self.title\nEOF)",
      "Bash(\"G:\\\\Мой диск\\\\buket\\\\backend\\\\shop\\\\admin.py\" << 'EOF'\n\n\n@admin.register\\(SitePage\\)\nclass SitePageAdmin\\(admin.ModelAdmin\\):\n    list_display = \\('title', 'slug', 'is_active', 'sort_order'\\)\n    list_editable = \\('is_active', 'sort_order'\\)\n    prepopulated_fields = {'slug': \\('title',\\)}\n    fields = \\('title', 'slug', 'content', 'is_active', 'sort_order'\\)\nEOF)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)"
    ]
  }
}
